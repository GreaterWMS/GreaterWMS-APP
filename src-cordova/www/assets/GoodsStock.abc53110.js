import{Q as d}from"./QItemLabel.8b351527.js";import{Q as Y,b as D,a as U}from"./QList.5473fc14.js";import{_ as Z,aC as z,J as H,aR as K,r as ee,c as t,w as $,o as ae,M as C,O as te,R as o,f as s,W as g,X as i,$ as q,Y as x,Z as ne,F,S as se,a1 as oe}from"./index.1785b037.js";import{u as ce}from"./use-quasar.8d75fc37.js";import{a as ie}from"./index.2885cb15.js";import{u as le}from"./vue-i18n.runtime.esm-bundler.ec1d6f08.js";const de=z({name:"GoodsStock",data(){return{}},setup(){const e=H(),w=K(),m=ce(),r=ee(0),{t:u}=le(),y=t({get:()=>e.state.fabchange.fab1}),l=t({get:()=>e.state.fabchange.fab2}),h=t({get:()=>e.state.fabchange.fab3}),O=t({get:()=>e.state.fabchange.fab4}),Q=t({get:()=>e.state.linkchange.oldlink,set:a=>{e.commit("linkchange/OldLinkChanged",a)}}),L=t({get:()=>e.state.linkchange.newlink,set:a=>{e.commit("linkchange/NewLinkChanged",a)}}),N=t({get:()=>e.state.screenchange.screenscroll}),V=t({get:()=>e.state.loginauth.authin}),j=t({get:()=>e.state.loginauth.login_name}),B=t({get:()=>e.state.loginauth.operator}),G=t({get:()=>e.state.settings.openid}),A=t({get:()=>e.state.langchange.lang}),b=t({get:()=>e.state.settings.server}),k=t({get:()=>e.state.scanchanged.scandata,set:a=>{e.commit("scanchanged/ScanChanged",a)}}),J=t({get:()=>e.state.scanchanged.datadetail,set:a=>{e.commit("scanchanged/ScanDataChanged",a)}}),P=t({get:()=>e.state.scanchanged.asndata,set:a=>{e.commit("scanchanged/ASNDataChanged",a)}}),W=t({get:()=>e.state.scanchanged.dndata,set:a=>{e.commit("scanchanged/DNDataChanged",a)}}),X=t({get:()=>e.state.scanchanged.bindata,set:a=>{e.commit("scanchanged/BinDataChanged",a)}}),f=t({get:()=>e.state.scanchanged.tablelist,set:a=>{e.commit("scanchanged/TableDataChanged",a)}}),p=t({get:()=>e.state.scanchanged.scanmode,set:a=>{e.commit("scanchanged/ScanModeChanged",a)}}),I=t({get:()=>e.state.scanchanged.bar_scanned,set:a=>{e.commit("scanchanged/BarScannedChanged",a)}}),v=t({get:()=>e.state.scanchanged.apiurl,set:a=>{e.commit("scanchanged/ApiUrlChanged",a)}}),_=t({get:()=>e.state.scanchanged.apiurlnext,set:a=>{e.commit("scanchanged/ApiUrlNextChanged",a)}}),T=t({get:()=>e.state.scanchanged.apiurlprevious,set:a=>{e.commit("scanchanged/ApiUrlPreviousChanged",a)}});function E(a){if(a!==null){var n=b.value.split(":"),c=a.split(":");if(c.length===2)return n[0]!==c[0]?n[0]+":"+c[1]:a;if(c.length===3)return n[0]!==c[0]?n[0]+":"+c[1]+":"+c[2]:a}else return null}function M(a){k.value=a,p.value="GOODS",Q.value="goodsstock",L.value="binstock",w.push({name:"binstock"})}function R(a){ie.get(v.value+a,{headers:{"Content-Type":"application/json",token:G.value,language:A.value,operator:B.value}}).then(n=>{if(n.data.detail)m.notify({type:"negative",message:u("notice.mobile_scan.notice1")});else{var c=[];f.value.forEach(S=>{c.push(S)}),n.data.results.forEach(S=>{c.push(S)}),f.value=c,T.value=E(n.data.previous),_.value=E(n.data.next)}}).catch(n=>{m.notify({type:"negative",message:u("notice.mobile_scan.notice3")})})}return $(N,(a,n)=>{a>=.95?_.value!==null&&(v.value=_.value,r.value=1):r.value=0}),$(r,(a,n)=>{a===1&&R("")}),$(I,(a,n)=>{p.value==="GOODS"&&M(k.value)}),ae(()=>{V.value==="0"?m.notify({type:"negative",message:u("notice.mobile_userlogin.notice9")}):(p.value="GOODS",v.value=b.value+"/stock/list/?ordering=-id",f.value=[],R(""))}),{t:u,fab1:y,fab2:l,fab3:h,fab4:O,oldlink:Q,newlink:L,screenscroll:N,authin:V,login_name:j,openid:G,operator:B,lang:A,requestauth:r,baseurl:b,apiurl:v,apiurlnext:_,apiurlprevious:T,scandata:k,datadetail:J,tablelist:f,asndata:P,dndata:W,bindata:X,scanmode:p,bar_scanned:I,DetailLine:M}}});function ge(e,w,m,r,u,y){return C(),te(Y,{bordered:"",padding:""},{default:o(()=>[s(U,null,{default:o(()=>[s(D,null,{default:o(()=>[s(d,{overline:""},{default:o(()=>[g(i(e.$t("notice.mobile_goodsstock.notice1")),1)]),_:1}),s(d,{caption:""},{default:o(()=>[g(i(e.$t("notice.mobile_goodsstock.notice2")),1)]),_:1})]),_:1})]),_:1}),s(q,{spaced:""}),(C(!0),x(F,null,ne(e.tablelist,(l,h)=>(C(),x(F,{key:h},[s(U,null,{default:o(()=>[s(D,{onClick:O=>e.DetailLine(l.goods_code)},{default:o(()=>[s(d,null,{default:o(()=>[g(i(l.goods_code),1)]),_:2},1024),s(d,{caption:"",lines:"2"},{default:o(()=>[g(i(l.goods_desc),1)]),_:2},1024)]),_:2},1032,["onClick"]),s(D,{side:"",top:""},{default:o(()=>[s(d,{caption:""},{default:o(()=>[g(i(e.$t("notice.mobile_goodsstock.notice3"))+":"+i(l.onhand_stock),1)]),_:2},1024),s(d,{caption:""},{default:o(()=>[g(i(e.$t("notice.mobile_goodsstock.notice4"))+i(l.can_order_stock),1)]),_:2},1024)]),_:2},1024)]),_:2},1024),se(s(q,{spaced:"",inset:"item"},null,512),[[oe,h+1!==e.tablelist.length]])],64))),128))]),_:1})}var ve=Z(de,[["render",ge]]);export{ve as default};
